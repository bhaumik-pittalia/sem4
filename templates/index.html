{%extends 'template.html'%}
{%block title%}Appointment Schedulling{%endblock%}

{%block body%}
<div class="container">
	<div class="col-12 col-md-12">
	{%if today or next or previous%}
	<br/>
		<div class="alert alert-warning">Note : To see full details of appointment please click on row of appointment table
    </div>

    <select class="form-control col-md-3" id="change_appointment" onchange="change_appointment()">
       <option value="today">Today's appointments</option>
       <option value="previous">Previous appointments</option>
       <option value="next">Comming appointments</option>
    </select><br/>

		<table class="table table-sm">
			<thead>
				<tr>
					<th>Date</th>
					<th>Time from</th>
					<th>Time to</th>
					<th>Name</th>
				</tr>
			</thead>
			<tbody id="today_appointment">
				{%for appointment in today%}
				<tr class="clickable-row" data-toggle="modal" data-target="#{{appointment.key.urlsafe()}}">
					<td>{{appointment.date}}</td>
					<td>{{convert12(appointment.time_from)}}</td>
					<td>{{convert12(appointment.time_to)}}</td>
					<td>{{appointment.name}}</td>
				</tr>
				<div class="modal fade" id="{{appointment.key.urlsafe()}}" tabindex="-1" role="dialog" aria-labelledby="sendEmailLabel" aria-hidden="true">
          			<div class="modal-dialog modal-dialog-centered" role="document">
            		<div class="modal-content">
              		<div class="modal-header">
                		<h5 class="modal-title" id="exampleModalLabel">Appointment detail</h5>
                		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  			<span aria-hidden="true">&times;</span>
                		</button>
              		</div>
              		<div class="modal-body">
                	<form>
                  		<div class="row">
                    		<div class="col">Name:</div>
                    		<div class="col">{{appointment.name}}</div>
                  		</div>
                  		<div class="row">
                    		<div class="col">Email:</div>
                    		<div class="col">{{appointment.email}}</div>
                  		</div>
                  		<div class="row">
                    		<div class="col">Phone:</div>
                    		<div class="col">{{appointment.phone}}</div>
                  		</div>
                  		<div class="row">
                    		<div class="col">Date:</div>
                    		<div class="col">{{appointment.date}}</div>
                  		</div>
                  		<div class="row">
                    		<div class="col">Time From:</div>
                    		<div class="col">{{convert12(appointment.time_from)}}</div>
                  		</div>
                  		<div class="row">
                    		<div class="col">Time To:</div>
                    		<div class="col">{{convert12(appointment.time_to)}}</div>
                  		</div>
                	</form>
              		</div>
            		</div>
        			</div>
				</div>
				{%endfor%}
			</tbody>
      <tbody id="next_appointment" style="display: none;">
        {%for appointment in next%}
        <tr class="clickable-row" data-toggle="modal" data-target="#{{appointment.key.urlsafe()}}">
          <td>{{appointment.date}}</td>
          <td>{{convert12(appointment.time_from)}}</td>
          <td>{{convert12(appointment.time_to)}}</td>
          <td>{{appointment.name}}</td>
        </tr>
        <div class="modal fade" id="{{appointment.key.urlsafe()}}" tabindex="-1" role="dialog" aria-labelledby="sendEmailLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Appointment detail</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                  <form>
                      <div class="row">
                        <div class="col">Name:</div>
                        <div class="col">{{appointment.name}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Email:</div>
                        <div class="col">{{appointment.email}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Phone:</div>
                        <div class="col">{{appointment.phone}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Date:</div>
                        <div class="col">{{appointment.date}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Time From:</div>
                        <div class="col">{{convert12(appointment.time_from)}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Time To:</div>
                        <div class="col">{{convert12(appointment.time_to)}}</div>
                      </div>
                  </form>
                  </div>
                </div>
              </div>
        </div>
        {%endfor%}
      </tbody>
      <tbody id="previous_appointment" style="display: none;">
        {%for appointment in previous%}
        <tr class="clickable-row" data-toggle="modal" data-target="#{{appointment.key.urlsafe()}}">
          <td>{{appointment.date}}</td>
          <td>{{convert12(appointment.time_from)}}</td>
          <td>{{convert12(appointment.time_to)}}</td>
          <td>{{appointment.name}}</td>
        </tr>
        <div class="modal fade" id="{{appointment.key.urlsafe()}}" tabindex="-1" role="dialog" aria-labelledby="sendEmailLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Appointment detail</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                  <form>
                      <div class="row">
                        <div class="col">Name:</div>
                        <div class="col">{{appointment.name}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Email:</div>
                        <div class="col">{{appointment.email}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Phone:</div>
                        <div class="col">{{appointment.phone}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Date:</div>
                        <div class="col">{{appointment.date}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Time From:</div>
                        <div class="col">{{convert12(appointment.time_from)}}</div>
                      </div>
                      <div class="row">
                        <div class="col">Time To:</div>
                        <div class="col">{{convert12(appointment.time_to)}}</div>
                      </div>
                  </form>
                  </div>
                </div>
              </div>
        </div>
        {%endfor%}
      </tbody>
		</table>
	{%else%}
	<br/>
	<div id="signup-alert" class="alert alert-success" role="alert">
        <h4 class="alert-heading">Appointment management!</h4>
            <p>If anyone takes your appointment will show here.This alert message won't appear here after any appointment is taken.You can see full details of appointment e.g. name, date, time for appointment etc.</p>
            <hr>
            <p class="mb-0">Thanks for using this application.</p>
    </div>
	{%endif%}
	</div>
</div>
{%endblock%}

{%block script%}
<script type="text/javascript">
  function change_appointment()
  {
      $('#document').ready(function(){
        if($('#change_appointment').val()=="today")
        {
          $('#today_appointment').show();
          $('#next_appointment').hide();
          $('#previous_appointment').hide();
        }
        if($('#change_appointment').val()=="next")
        {
          $('#next_appointment').show();
          $('#previous_appointment').hide();
          $('#today_appointment').hide();
        }
        if($('#change_appointment').val()=="previous")
        {
          $('#previous_appointment').show();
          $('#today_appointment').hide();
          $('#next_appointment').hide();
        }
      });
  }
</script>
{%endblock%}